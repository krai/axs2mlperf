{
    "_parent_entries": [ [ "^", "byname", "base_loadgen_experiment" ] ],


    "accuracy_log_path": ["^^", "get_path", "mlperf_log_accuracy.json"],
    "output_accuracy_path": ["^^", "get_path", "accuracy_results.json"],
    "output_path": ["^^", "get_path", "images/"],

    "abs_script_path": [ "^^", "execute", [[
        [ "get_kernel" ],
        [ "byname", "text_to_image_using_loadgen" ],
        [ "get_path", [ [ "text_to_image", "tools", "accuracy_coco.py" ] ] ]
    ]] ],
    "caption_path": [ "^", "execute", [[
        [ "byname", "text_to_image_using_loadgen" ],
        [ "get_path", [ [ "text_to_image", "coco2014", "captions", "captions.tsv" ] ] ]
    ]] ],
    "ids_path": [ "^", "execute", [[
        [ "byname", "text_to_image_using_loadgen" ],
        [ "get_path", [ [ "text_to_image", "tools", "sample_ids.txt" ] ] ]
    ]] ],

    "compliance_images_path": [ "^^", "get", "output_path" ],
    "compliance_images_path_cmd": [ "^^", "compliance_images_cmd" ],

    "extract_accuracy_report": [ "^^", "execute", [[
        [ "get_kernel" ],
        [ "byname", "python_script" ],
        [ "run", [], {
                "python_deps": [
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=numpy,package_version=1.26.0" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=pandas,no_deps" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=scipy" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=torchvision" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=transformers,package_version=4.52.3" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=accelerate,package_version=0.23.0" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=open-clip-torch,package_version=2.7.0" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=opencv-python,package_version=4.8.1.78" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=pycocotools,package_version=2.0.7" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=torchmetrics[image],package_version=1.2.00" ],
                    [ "AS^IS", "^^", "python_sync_pip_package", "python_package,package_name=ijson" ]

                ],
                "abs_script_path": ["^^", "get", "abs_script_path"],
                "script_extra_params": [ "^^", "substitute", "--mlperf-accuracy-file \"#{accuracy_log_path}#\" --caption-path \"#{caption_path}#\" --device gpu  --ids-path \"#{ids_path}#\" --output-file \"#{output_accuracy_path}#\" #{compliance_images_path_cmd}#" ],
                "capture_output": true
            } ],
            0,
            [ "func", [ "ufun.rematch", "(\\{.*\\})" ] ]
    ]], {} ],
    "accuracy_dict": [ "^^", "execute", [[
        [ "get", "accuracy_report" ],
        0,
        [ "func", "eval" ]
    ]], {} ],
    "fid": [ "^^" , "dig","accuracy_dict.FID_SCORE" ],
    "clip": [ "^^" , "dig", "accuracy_dict.CLIP_SCORE" ],

    "accuracy_range_dict": { "FID_SCORE": [23.01085758, 23.95007626], "CLIP_SCORE": [31.68631873, 31.81331801] }
}
