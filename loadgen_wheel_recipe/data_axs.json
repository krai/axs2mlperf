{
    "_parent_entries": [ [ "^", "byname", "base_build_python_wheel" ] ],

    "_producer_rules": [
        [ [ "python_package_wheel", "setup_from_source", "package_name=mlperf_loadgen" ], [["get","populated_wheel_entry"]] ],

        [ [ "python_package", "package_name=mlperf_loadgen", "desired_python_version." ], [ ["get_kernel"], ["byname", "pip" ], ["install"]], {
                "installable": [ "AS^IS", "^^", "execute", [[
                    [ "get_kernel" ],
                    [ "byquery", [ "^^", "substitute", "python_package_wheel,setup_from_source,package_name=#{package_name}#,desired_python_version===#{desired_python_version}#" ] ],
                    [ "get_path", "*.whl" ],
                    0,
                    ["func", "glob.glob"  ],
                    [ "__getitem__", 0 ]
                 ]] ]
            }
        ]
    ],

    "python_deps": [
        [ "^^", "python_sync_pip_package", [[ "python_package", "package_name=setuptools", "installable===\"setuptools<=70.3.0\"" ]] ],
        [ "^^", "python_sync_pip_package", [[ "python_package", "package_name=wheel" ]] ],
        [ "^^", "python_sync_pip_package", [[ "python_package", "package_name=pybind11" ]] ]
    ],

    "compiler_path": [ "^", "execute", [[
        [ "byquery", "shell_tool,can_compile_c" ],
        [ "get", "tool_path" ]
    ]] ],

    "extra_env": {
        "CC": [ "^^", "get", "compiler_path" ],
        "CFLAGS": "-std=c++14"
    },

    "in_dir": [ "^", "execute", [[
        [ "byquery", "git_repo,repo_name=mlperf_inference_git" ],
        [ "get_path", "loadgen" ]
    ]] ]
}
