{
    "_producer_rules": [
        [ [ "downloaded", "hf_model" ], [["get_kernel"],["byname","downloader"],["download"]], {
            "downloading_tool_query": [ "AS^IS", "^^", "substitute", "shell_tool,can_download_url_from_huggingface,hf_token=#{hf_token}#" ],
            "type": "model"
        }, ["url", "newborn_entry_name", "uncompressed_split_file_path", "model_publisher", "model_name", "model_family", "variant" ] ],
        [ [ "downloaded", "hf_tokeniser" ], [["get_kernel"],["byname","downloader"],["download"]], {
            "downloading_tool_query": [ "AS^IS", "^^", "substitute", "shell_tool,can_download_url_from_huggingface,hf_token=#{hf_token}#" ],
            "downloading_tool_cmd_key": "dload_tokeniser",
            "type": "tokeniser"
        }, ["url", "newborn_entry_name", "uncompressed_split_file_path", "model_publisher", "model_name", "model_family" ] ]
    ],

    "model_family": "llama2",
    "variant": "7b",

    "model_family_information": {
        "llama2": {
            "name_format": "Llama-2-#{variant}#-chat-hf",
            "model_publisher": "meta-llama"
        },
        "llama3": {
            "name_format": "Meta-Llama-3-#{variant}#-Instruct",
            "model_publisher": "meta-llama"
        },
        "llama3_1": {
            "name_format": "Llama-3.1-#{variant}#-Instruct",
            "model_publisher": "meta-llama"
        },
        "mixtral": {
            "name_format": "Mixtral-#{variant}#-Instruct-v0.1",
            "model_publisher": "mistralai"
        }
    },

    "model_family_metadata": [ "^^", "execute", [[
        [ "get", "model_family_information" ],
        [ "get", [ "^^", "get", "model_family" ] ]
    ]]],

    "model_name": [ "^^", "substitute", [ "^^", "dig", "model_family_metadata.name_format" ]],
    "model_publisher": [ "^^", "dig", "model_family_metadata.model_publisher" ],

    "uncompressed_split_file_path": [],
    "url": [ "AS^IS", "^^", "substitute", "#{model_publisher}#/#{model_name}#"],
    "newborn_entry_name": [ "AS^IS", "^^", "substitute", "downloaded_#{model_name}#_#{type}#" ],

    "hf_token": [ "^", "throw", "Must provide a hf_token. You can get this from huggingface" ]
}
